function fixResponsiveImg(){$("[data-bock-img--full]").each(function(){var i=$(this),e=i.find("img");e.removeAttr("width").removeAttr("height").css({width:"",height:""}).css({maxWidth:"100%",maxHeight:"100%"});var t,n,s=e.width()/e.height();i.width()>e.width()&&(e.css({width:"100%",height:""}),n=i.width()/s,e.css({height:n+"px",maxHeight:"none"})),i.height()>e.height()&&(e.css("height","100%"),t=i.height()*s,e.css("width",t+"px").css("max-width","none"))})}function Slider(i){this.$parentSlider=$(i);var e=this;if(this.run=function(){e.$parentSlider.is(i)&&(this.initialSliders(),this.setBtnPosition(d),this.setBtnPosition(l))},this.$parentSlider.is(i)){var t=this.$parentSlider.find(".slide-item"),n=this.$parentSlider.innerWidth(),s=t.filter(":first").innerWidth(),a=this.$parentSlider.find(".slide-item").filter(":first"),r=this.$parentSlider.find(".slider-btn-wrp"),d=r.find("[data-next]"),l=r.find("[data-prev]"),o=0,c=0;r.on("click",function(i){var t=$(i.target);if(!t.is(".slider-btn"))return;var n=0;if(t.is("[data-next]")){var r=e.$parentSlider.find(".slide-item--opacity");if(r.length>0){o=n=o-s;var h=r.filter(":first");TweenMax.to(h,.5,{opacity:1,onStart:function(){h.removeClass("slide-item--opacity"),1===r.length&&d.css("display","none")}}),TweenMax.to(a,.5,{marginLeft:n}),c++,l.css("display","inline-block")}}if(t.is("[data-prev]")&&c>0){o=n=o+s;var f=e.$parentSlider.find(".slide-item").not(".slide-item--opacity").filter(":last");TweenMax.to(f,.5,{opacity:.2,onStart:function(){f.addClass("slide-item--opacity"),0===c&&l.css("display","none")}}),TweenMax.to(a,.5,{marginLeft:n}),c--,d.css("display","inline-block")}});var h=!1;$(window).resize(function(){setTimeout(function(){h||(n=e.$parentSlider.innerWidth(),s=t.filter(":first").innerWidth(),o=0,c=0,TweenMax.to(a,.5,{marginLeft:0,onComplete:function(){e.initialSliders(),e.setBtnPosition(d),d.css("display",""),e.setBtnPosition(l),l.css("display","none")}}),e.$parentSlider.find(".slide-item").each(function(i){$(this).removeClass("slide-item--opacity"),"1"===$(this).css("opacity")&&$(this).css("opacity","")}),h=!0)},500),h=!1}),this.setBtnPosition=function(i){if(i.is("[data-next]")){var e,a=t.not(".slide-item--opacity").filter(":last");e=0===a.length?0:a.position().left+s;var r=n-e-i.innerWidth()/2;r<0&&(r=0),t.not(".slide-item--opacity").length<2&&(r=$(window).width()/2-2*i.innerWidth()+10),i.css("right",r)}if(i.is("[data-prev]")){var d=s-i.innerWidth()/2;t.not(".slide-item--opacity").length<2&&(d=$(window).width()/2-i.innerWidth()+10),i.css("left",d)}},this.initialSliders=function(){for(var i=Math.floor(n/s);i<t.length;i++)t.eq(i).addClass("slide-item--opacity")}}}function sliderInformation(){var i=$("[data-slider-information]");if(i.is("[data-slider-information]")){var e=i.find(".information-btn-wrp"),t=new function(){var e,t;this.slides=i.find(".information-item--slider-wrp"),this.numberOfSlides=this.slides.length,this.visibleWidth=i.innerWidth(),this.slideWidth=i.find(".information-item--slider-wrp").filter(":first").innerWidth(),this.numberOfVisibleSlides=(e=this.visibleWidth,t=this.slideWidth,Math.floor(e/t)),this.numGreySliders=this.numberOfSlides-this.numberOfVisibleSlides,this.currentVisibleSlide=this.slides.eq(this.numberOfVisibleSlides-1),this.currentGreySlides=this.numGreySliders,this.currentVisibleSlides=this.numberOfVisibleSlides,this.btnRight=i.find("[data-next]"),this.btnLeft=i.find("[data-prev]"),this.isbtnLeftShow=!1,this.isbtnRightShow=!1,this.currentMargin=0};!function(){for(var i=t.numberOfVisibleSlides;i<t.numberOfSlides;i++)t.slides.eq(i).addClass("information__item--opacity")}(),n(t.btnRight),n(t.btnLeft),e.on("click",function(i){var e=$(i.target);if(!e.is(".information-btn"))return;var n=0,s=$();e.is("[data-next]")&&t.currentGreySlides>0&&(n=t.currentMargin-t.slideWidth,t.currentMargin=n,t.currentGreySlides=t.currentGreySlides-1,t.currentVisibleSlides=t.currentVisibleSlides+1,s=t.slides.eq(t.currentVisibleSlides-1),TweenMax.to(s,.5,{opacity:1}),s.removeClass("information__item--opacity"),TweenMax.to(t.slides.eq(0),.5,{marginLeft:n}),0===t.currentGreySlides&&(t.btnRight.css("display","none"),t.isbtnRightShow=!1),t.isbtnLeftShow||(t.btnLeft.css("display","inline-block"),t.isbtnLeftShow=!0));e.is("[data-prev]")&&t.currentGreySlides<t.numGreySliders&&(n=t.currentMargin+t.slideWidth,t.currentMargin=n,t.currentGreySlides=t.currentGreySlides+1,s=t.slides.eq(t.currentVisibleSlides-1),TweenMax.to(s,.5,{opacity:.2}),s.addClass("information__item--opacity"),TweenMax.to(t.slides.eq(0),.5,{marginLeft:n}),t.currentVisibleSlides=t.currentVisibleSlides-1,t.isbtnRightShow||(t.btnRight.css("display","inline-block"),t.isbtnRightShow=!0),t.currentGreySlides>=t.numGreySliders&&(t.btnLeft.css("display","none"),t.isbtnLeftShow=!1))})}function n(i){if(i.is("[data-next]")){var e=t.currentVisibleSlide.position().left+t.slideWidth,n=t.visibleWidth-e-i.innerWidth()/2;i.css("right",n)}if(i.is("[data-prev]")){var s=t.slideWidth-i.innerWidth()/2;i.css("left",s)}}}function showPopupWindowInMainSlider(){$("[data-main-slider]").slick({speed:1e3,arrows:!1,dots:!0,dotsClass:"slick-dots slick-dots--type1"}),$("[data-main-slider]").on("afterChange",function(i,e,n,s){t()});var i=$("[data-btn-hover-list]"),e={btn:$(),parentBtn:$(),imgBtn:$(),parentSlide:$(),slideContent:$(),slideImg:$(),modalWindowsWrp:$(),currentWindow:$()};function t(){e.imgBtn.is(".car__img")&&(e.imgBtn.removeClass("active"),e.imgBtn.css("opacity","0")),e.modalWindowsWrp.is(".active")&&e.modalWindowsWrp.removeClass("active"),e.currentWindow.is(".active")&&(e.currentWindow.removeClass("active"),e.currentWindow.css("background-color","rgba(19,19,20,0)")),e.slideContent.is(".hidden")&&e.slideContent.removeClass("hidden"),e.slideImg.is(".blur")&&e.slideImg.removeClass("blur")}i.on("click mouseover",function(i){var n=$(i.target);if(n.is("span.list-btn")){t(),e.btn=n;var s,a,r,d=n.parent(".main-slider__list-item");e.parentBtn=d,e.imgBtn=e.parentBtn.find(".car__img"),e.parentSlide=d.closest(".main-slider__item"),e.imgBtn.addClass("active"),s=e.imgBtn.innerWidth(),a=e.btn.innerWidth(),r=0,s>a&&(r="-"+(s-a)/2+"px"),s<a&&(r=(a-s)/2+"px"),e.imgBtn.css("left",r),TweenMax.to(e.imgBtn,.4,{delay:.1,opacity:1}),function(i,t){var n=e.parentBtn.data("hoverSlideId"),s=e.parentSlide.find("[data-popup-items]");s.addClass("active"),e.modalWindowsWrp=s;var a=e.modalWindowsWrp.find('[data-slide-id="'+n+'"]');a.addClass("active"),TweenMax.to(a,.5,{delay:0,backgroundColor:"rgba(19,19,20,0.5)"}),e.currentWindow=a;var r=e.parentSlide.find(".main-slider__content");r.addClass("hidden"),e.slideContent=r;var d=e.parentSlide.find(".main-slider__img");d.addClass("blur"),e.slideImg=d,e.parentSlide.find(".slick-dots--type1").css("display","none")}()}})}function showMainMenu(){var i=$("[data-popup-btn]"),e=$(".main-menu"),t=$("[data-main-menu]"),n=t.innerHeight()-1;e.innerHeight(n);var s=$("[data-main-submenu]");$(window).scroll(function(){var i=$(window).scrollTop();i>1?t.addClass("fixed"):i<=1&&t.removeClass("fixed")}),i.on("click",function(e){if($(this).toggleClass("active"),i.hasClass("active")){s.addClass("active");var t=n+"px";TweenMax.to(s,1,{delay:.3,top:t,opacity:1})}else TweenMax.to(s,1,{delay:.3,top:"-1000px",opacity:0})}),$("[data-btn-search]").on("click",function(i){i.preventDefault(),$(".input").toggleClass("active"),$(".main-menu__search").toggleClass("active"),$(this).toggleClass("active")})}function calendarInput(){document.getElementById("test-drive-calendar")&&$('#test-drive-calendar input[name="test-drive-calendar"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,locale:{format:"MM/DD/YYYY",separator:" - ",applyLabel:"Применить",cancelLabel:"Отмена",fromLabel:"От",toLabel:"До",customRangeLabel:"Свой",daysOfWeek:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],firstDay:1}})}function expandingList(){var i=document.querySelector("[data-expanding-list]");i&&i.addEventListener("click",function(){var i=event.target.parentElement;if(console.log(i),!i.classList.contains("list__item"))return;i.classList.toggle("list__item--current"),"false"===i.getAttribute("data-is-show")?i.setAttribute("data-is-show","true"):"true"===i.getAttribute("data-is-show")&&(i.setAttribute("data-is-show","false"),function(i){for(var e=i.querySelectorAll(".list__item--current"),t=0;t<e.length;t++)e[t].classList.contains("list__item--current")&&e[t].classList.remove("list__item--current")}(i))})}function expandSingleList(i,e){var t=$(e),n=$(i);t.on("click",function(i){i.preventDefault();var e=$(i.target);console.log(e),console.log(n),t.toggleClass("active"),n.toggleClass("active")})}jQuery(document).ready(function(i){showMainMenu(),showPopupWindowInMainSlider(),expandSingleList("[data-single-expandingList-open]","[data-single-list-open-btn]"),expandingList(),i("[data-tel]").mask("+7 (000) 000-00-00"),i("[data-slider-building]").slick({speed:1e3,arrows:!1,dots:!0,dotsClass:"slick-dots slick-dots--type1"}),i("[data-slider-model-page]").slick({speed:1e3,autoplay:!0,autoplaySpeed:4e3,dots:!1,prevArrow:i(""),nextArrow:i(".mp-slider__btn .slick-next")}),i("[data-fancybox-img]").fancybox({buttons:["close"],clickSlide:"close",clickContent:"close",clickOutside:"close"}),i("select").niceSelect(),calendarInput(),new Slider("[data-slider-certificates]").run(),new Slider("[data-slider-information]").run(),i(".bock_img").each(function(){var e=i(this),t=e.find("img");e.height()>t.height()?t.css("max-width","none"):e.width()>t.width()&&t.css("max-height","none")}),fixResponsiveImg();var e=!1;i(window).resize(function(){setTimeout(function(){e||(fixResponsiveImg(),e=!0)},500),e=!1})});