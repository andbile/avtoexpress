function modal(){var i=$(".modal-window");$('[data-action="modal_window"]').on("click",function(t){t.preventDefault();var e,n=function(t){if(t){var e='[data-target="'+t+'"]';return i.filter(e)}}($(this).data("target"));(e=n).addClass("modal-window--show"),setTimeout(function(){e.addClass("modal-window--opacity")},500),n.find(".modal-window__btn-close").on("click",function(){var i;(i=n).removeClass("modal-window--opacity"),setTimeout(function(){i.removeClass("modal-window--show")},400)})})}function fixResponsiveImg(i){function t(i){var t=i.find("img");t.removeAttr("width").removeAttr("height").css({width:"",height:""}).css({maxWidth:"100%",maxHeight:"100%"});var e,n,a=t.width()/t.height();i.width()>t.width()&&(t.css({width:"100%",height:""}),n=i.width()/a,t.css({height:n+"px",maxHeight:"none"})),i.height()>t.height()&&(t.css("height","100%"),e=i.height()*a,t.css("width",e+"px").css("max-width","none"))}i?i.is(".bock_img-full")&&t(i):$("[data-bock-img--full]").each(function(){t($(this))})}function Slider(i){this.$parentSlider=$(i);var t=this;if(this.run=function(){t.$parentSlider.is(i)&&(this.initialSliders(),this.setBtnPosition(d),this.setBtnPosition(l))},this.$parentSlider.is(i)){var e=this.$parentSlider.find(".slide-item"),n=this.$parentSlider.innerWidth(),a=e.filter(":first").innerWidth(),s=this.$parentSlider.find(".slide-item").filter(":first"),o=this.$parentSlider.find(".slider-btn-wrp"),d=o.find("[data-next]"),l=o.find("[data-prev]"),r=0,c=0;o.on("click",function(i){var e=$(i.target);if(!e.is(".slider-btn"))return;var n=0;if(e.is("[data-next]")){var o=t.$parentSlider.find(".slide-item--opacity");if(o.length>0){r=n=r-a;var m=o.filter(":first");TweenMax.to(m,.5,{opacity:1,onStart:function(){m.removeClass("slide-item--opacity"),1===o.length&&d.css("display","none")}}),TweenMax.to(s,.5,{marginLeft:n}),c++,l.css("display","inline-block")}}if(e.is("[data-prev]")&&c>0){r=n=r+a;var p=t.$parentSlider.find(".slide-item").not(".slide-item--opacity").filter(":last");TweenMax.to(p,.5,{opacity:.2,onStart:function(){p.addClass("slide-item--opacity"),0===c&&l.css("display","none")}}),TweenMax.to(s,.5,{marginLeft:n}),c--,d.css("display","inline-block")}}),e.on("click",function(i){if(!$(this).is(".slide-item--preview-img"))return;var e=t.$parentSlider.find(".slider-full-img--model-used");e.empty(),$(this).find("img").clone().appendTo(e),setTimeout(function(){fixResponsiveImg(e)},100)});var m=!1;$(window).resize(function(){setTimeout(function(){m||(n=t.$parentSlider.innerWidth(),a=e.filter(":first").innerWidth(),r=0,c=0,TweenMax.to(s,.5,{marginLeft:0,onComplete:function(){t.initialSliders(),t.setBtnPosition(d),d.css("display",""),t.setBtnPosition(l),l.css("display","none")}}),t.$parentSlider.find(".slide-item").each(function(i){$(this).removeClass("slide-item--opacity"),"1"===$(this).css("opacity")&&$(this).css("opacity","")}),m=!0)},500),m=!1}),this.setBtnPosition=function(i){if(i.is("[data-next]")){var t,s=e.not(".slide-item--opacity").filter(":last");t=0===s.length?0:s.position().left+a;var o=n-t-i.innerWidth()/2;o<0&&(o=0),e.not(".slide-item--opacity").length<2&&(o=$(window).width()/2-2*i.innerWidth()+10),i.is(".slider-btn--model-used")&&(o=""),i.css("right",o)}if(i.is("[data-prev]")){var d=a-i.innerWidth()/2;e.not(".slide-item--opacity").length<2&&(d=$(window).width()/2-i.innerWidth()+10),i.is(".slider-btn--model-used")&&(d=""),i.css("left",d)}},this.initialSliders=function(){for(var i=Math.floor(n/a);i<e.length;i++)e.eq(i).addClass("slide-item--opacity")}}}function showPopupWindowInMainSlider(){$("[data-main-slider]").slick({speed:1e3,arrows:!1,dots:!0,dotsClass:"slick-dots slick-dots--type1"}),$("[data-main-slider]").on("afterChange",function(i,t,n,a){e()});var i=$("[data-btn-hover-list]"),t={btn:$(),parentBtn:$(),imgBtn:$(),parentSlide:$(),slideContent:$(),slideImg:$(),modalWindowsWrp:$(),currentWindow:$()};function e(){t.imgBtn.is(".car__img")&&(t.imgBtn.removeClass("active"),t.imgBtn.css("opacity","0")),t.modalWindowsWrp.is(".active")&&t.modalWindowsWrp.removeClass("active"),t.currentWindow.is(".active")&&(t.currentWindow.removeClass("active"),t.currentWindow.css("background-color","rgba(19,19,20,0)")),t.slideContent.is(".hidden")&&t.slideContent.removeClass("hidden"),t.slideImg.is(".blur")&&t.slideImg.removeClass("blur")}i.on("click mouseover",function(i){var n=$(i.target);if(n.is("span.list-btn")){e(),t.btn=n;var a=n.parent(".main-slider__list-item");t.parentBtn=a,t.imgBtn=t.parentBtn.find(".car__img"),t.parentSlide=a.closest(".main-slider__item"),t.imgBtn.addClass("active"),TweenMax.to(t.imgBtn,.4,{delay:.1,opacity:1}),function(i,e){var n=t.parentBtn.data("hoverSlideId"),a=t.parentSlide.find("[data-popup-items]");a.addClass("active"),t.modalWindowsWrp=a;var s=t.modalWindowsWrp.find('[data-slide-id="'+n+'"]');s.addClass("active"),TweenMax.to(s,.5,{delay:0,backgroundColor:"rgba(19,19,20,0.5)"}),t.currentWindow=s;var o=t.parentSlide.find(".main-slider__content");o.addClass("hidden"),t.slideContent=o;var d=t.parentSlide.find(".main-slider__img");d.addClass("blur"),t.slideImg=d,t.parentSlide.find(".slick-dots--type1").css("display","none")}()}})}function showMainMenu(){var i=$("[data-popup-btn]"),t=$(".main-menu"),e=$("[data-main-menu]"),n=e.innerHeight()-1;t.innerHeight(n);var a=$("[data-main-submenu]");$(window).scroll(function(){if($(window).width()>"769"){var i=$(window).scrollTop();i>1?e.addClass("fixed"):i<=1&&e.removeClass("fixed")}else $(window).width()<="769"&&e.removeClass("fixed")}),i.on("click",function(t){if($(this).toggleClass("active"),i.hasClass("active")){a.addClass("active");var e=n+"px";TweenMax.to(a,1,{delay:.3,top:e,opacity:1})}else TweenMax.to(a,1,{delay:.3,top:"-1000px",opacity:0})}),$("[data-btn-search]").on("click",function(i){i.preventDefault(),$(".input").toggleClass("active"),$(".main-menu__search").toggleClass("active"),$(this).toggleClass("active")})}function calendarInput(){document.getElementById("test-drive-calendar")&&$('#test-drive-calendar input[name="test-drive-calendar"]').daterangepicker({singleDatePicker:!0,showDropdowns:!0,locale:{format:"MM/DD/YYYY",separator:" - ",applyLabel:"Применить",cancelLabel:"Отмена",fromLabel:"От",toLabel:"До",customRangeLabel:"Свой",daysOfWeek:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],firstDay:1}})}function expandingList(){var i=document.querySelector("[data-expanding-list]");i&&i.addEventListener("click",function(){var i=event.target.parentElement;if(console.log(i),!i.classList.contains("list__item"))return;i.classList.toggle("list__item--current"),"false"===i.getAttribute("data-is-show")?i.setAttribute("data-is-show","true"):"true"===i.getAttribute("data-is-show")&&(i.setAttribute("data-is-show","false"),function(i){for(var t=i.querySelectorAll(".list__item--current"),e=0;e<t.length;e++)t[e].classList.contains("list__item--current")&&t[e].classList.remove("list__item--current")}(i))})}function expandSingleList(i,t){var e=$(t),n=$(i);e.on("click",function(i){i.preventDefault();var t=$(i.target);console.log(t),console.log(n),e.toggleClass("active"),n.toggleClass("active")})}jQuery(document).ready(function(i){showMainMenu(),showPopupWindowInMainSlider(),expandSingleList("[data-single-expandingList-open]","[data-single-list-open-btn]"),expandingList(),modal(),i("[data-tel]").mask("+7 (000) 000-00-00"),i("[data-slider-building]").slick({speed:1e3,arrows:!1,dots:!0,dotsClass:"slick-dots slick-dots--type1"}),i("[data-slider-model-page]").slick({speed:1e3,autoplay:!0,autoplaySpeed:4e3,dots:!1,prevArrow:i(""),nextArrow:i(".mp-slider__btn .slick-next")}),i("[data-fancybox-img]").fancybox({buttons:["close"],clickSlide:"close",clickContent:"close",clickOutside:"close"}),i("select").niceSelect(),calendarInput(),new Slider("[data-slider-certificates]").run(),new Slider("[data-slider-information]").run(),new Slider("[data-slider-car-used]").run(),i(".bock_img").each(function(){var t=i(this),e=t.find("img");t.height()>e.height()?e.css("max-width","none"):t.width()>e.width()&&e.css("max-height","none")}),fixResponsiveImg();var t=!1;i(window).resize(function(){setTimeout(function(){t||(fixResponsiveImg(),t=!0)},500),t=!1}),i(function(){i('input[name="tel"]').mask("+7 (999) 999-99-99")})});